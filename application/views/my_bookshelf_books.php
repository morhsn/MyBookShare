<?phpdefined('BASEPATH') OR exit('No direct script access allowed');?><div class="container clearfix">    <!-- Portfolio Filter    ============================================= -->    <ul id="portfolio-filter" class="clearfix">        <li class="activeFilter"><a href="#" data-filter="*">Show All</a></li>        <!--        <li><a href="#" data-filter=".pf-icons">Books My Friends Own</a></li>-->        <!--        <li><a href="#" data-filter=".pf-illustrations">Books I Can Borrow Now</a></li>-->        <!--        <li><a href="#" data-filter=".pf-uielements">Books Friends Borrowed In The Past</a></li>-->    </ul><!-- #portfolio-filter end -->    <div id="portfolio-shuffle">        <i class="icon-random"></i>    </div>    <div class="clear"></div>    <!-- Portfolio Items    ============================================= -->    <div id="portfolio" class="portfolio-6 portfolio-masonry clearfix">        <?php for ($i = 0;                   $i < count($books);                   $i++): ?>            <article class="portfolio-item pf-media pf-icons"                     id="ArticleIdBook<?php echo $books[$i]->google_id; ?>">                <div class="portfolio-image" style="box-shadow: 3px 1px 10px #888888;">                    <a href="page/book/<?php echo $books[$i]->id; ?>">                        <img                            src="https://books.google.com/books?id=<?php echo $books[$i]->google_id; ?>&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"                            alt="Open Imagination">                    </a>                    <div class="portfolio-overlay">                        <a href="AjaxBookAdd" id="RemoveBookLink<?php echo $books[$i]->google_id; ?>"                           class="left-icon" title="Add Book To My Bookshelf"><i                                class="icon-line-minus"></i></a>                        <?php if (isset($books[$i]->id)): ?>                            <a href="page/book/<?php echo $books[$i]->id; ?>"                               title="Book Information" class="right-icon"><i                                    class="icon-line-ellipsis"></i></a>                        <?php endif ?>                    </div>                </div>                <!-- Notifications-->                <div id="custom-notification-message-success-<?php echo $books[$i]->google_id; ?>"                     data-notify-position="bottom-right" data-notify-type="success"                     data-notify-msg="<i class='icon-line-circle-check'></i> <strong><?php echo $books[$i]->name; ?></strong> Has Been Removed From Your Bookshelf."></div>                <div id="custom-notification-message-error-<?php echo $books[$i]->google_id; ?>"                     data-notify-position="bottom-right" data-notify-type="error"                     data-notify-msg="<i class='icon-line-circle-cross'></i>Unable To Remove <strong><?php echo $books[$i]->name; ?></strong> From Your Bookshelf."></div>                <script type="text/javascript">                    //Get a reference to the link on the page                    // with an id of "mylink"                    var lnkObj = document.getElementById("RemoveBookLink<?php echo $books[$i]->google_id; ?>");                    //Set code to run when the link is clicked                    // by assigning a function to "onclick"                    lnkObj.onclick = function () {                        var google_id = '<?php echo $books[$i]->google_id; ?>';                        jQuery.ajax({                            type: "POST",                            url: "<?php echo base_url(); ?>" + "ajax_controller/removeBook",                            dataType: 'json',                            data: {google_id: google_id}, // google_id is now referred to by id. Remap of value names.                            success: function (res) {                                if (res.success == "true") {                                    SEMICOLON.widget.notifications(jQuery('#custom-notification-message-success-<?php echo $books[$i]->google_id; ?>'));                                    $('#ArticleIdBook<?php echo $books[$i]->google_id; ?>').fadeOut(350, function () {                                        $(this).remove();                                    });                                }                                else {                                    SEMICOLON.widget.notifications(jQuery('#custom-notification-message-error-<?php echo $books[$i]->google_id; ?>'));                                }                            },                            error: function () {                                SEMICOLON.widget.notifications(jQuery('#custom-notification-message-error-<?php echo $books[$i]->google_id; ?>'));                            }                        });                        return false;                    }                </script>                <div class="portfolio-desc center">                    <h3><a href="page/book/<?php echo $books[$i]->id; ?>"><?php echo $books[$i]->name; ?></a></h3>                    <span><a href="page/book/<?php echo $books[$i]->id; ?>"><?php echo $books[$i]->author; ?></a></span>                    <h5>                        <?php if (isset($books[$i]->reviews)) {                            echo '<a href="page/book/' . $books[$i]->id . '">';                            $bookRatingAvg = 0;                            $reviewCount = 1;                            for ($k = 0;                                 $k < count($books[$i]->reviews);                                 $k++) {                                $bookRatingAvg = $bookRatingAvg + ($books[$i]->reviews[$k]->rating - $bookRatingAvg) / $reviewCount;                                $reviewCount++;                            }                            for ($stars = 0;                                 $stars < 5;                                 $stars++) {                                if ($bookRatingAvg - $stars >= 1.0) {                                    echo '<i class="icon-star3"></i>';                                } else if ($bookRatingAvg - $stars >= 0.5) {                                    echo '<i class="icon-star-half-full"></i>';                                } else {                                    echo '<i class="icon-star-empty"></i>';                                }                            }                            echo '<p style="display: inline !important;">&nbsp;' . count($books[$i]->reviews) . '</p>';                            echo '</a>';                        }                        ?>                    </h5>                </div>            </article>            <?php        endfor;        ?>    </div><!-- #portfolio end -->    <!-- Portfolio Script    ============================================= -->    <script type="text/javascript">        jQuery(window).load(function () {            var $container = $('#portfolio');            $container.isotope({transitionDuration: '0.65s'});            $('#portfolio-filter a').click(function () {                $('#portfolio-filter li').removeClass('activeFilter');                $(this).parent('li').addClass('activeFilter');                var selector = $(this).attr('data-filter');                $container.isotope({filter: selector});                return false;            });            $('#portfolio-shuffle').click(function () {                $container.isotope('updateSortData').isotope({                    sortBy: 'random'                });            });            $(window).resize(function () {                $container.isotope('layout');            });        });    </script><!-- Portfolio Script End --></div>